<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<title>Chihalu Utility Mod</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<nav>
		<div class="logo">BUILDING SUPPORT</div>
		<a class="cta" href="../index.html">TOPへ戻る</a>
	</nav>
	<main>
		<section class="hero">
			<div>
				<h1>設定パネル</h1>
				<p class="hero-description">インベントリ制御の履歴やプリセット動作をここから細かく調整できます。</p>
			</div>
		</section>

		<section>
			<h3>インベントリ制御設定</h3>
			<div class="cards-columns">
				<div class="card">
					<h2>履歴をリセット</h2>
					<p>現在保持している履歴を初期化し、新たな記録を取り直します。用途に応じて全ワールドかワールド別で選んでください。</p>
					<form class="settings-form" id="history-reset-form">
						<div class="radio-group">
							<label><input type="radio" name="resetScope" value="global" checked> ワールド共通</label>
							<label><input type="radio" name="resetScope" value="world"> ワールド別</label>
						</div>
						<div class="world-select" id="world-select">
							<label for="world-choice">ワールドを選択</label>
							<select id="world-choice" name="world">
								<option value="">選択してください</option>
								<option value="overworld">Overworld</option>
								<option value="nether">Nether</option>
								<option value="end">The End</option>
							</select>
						</div>
						<button type="button" class="reset-btn" id="history-reset-button">履歴をリセット</button>
						<p class="note">履歴のリセットは戻せません。必要に応じてワールドを確認のうえ実行してください。</p>
					</form>
				</div>
			</div>
		</section>
	</main>

	<script>
		document.addEventListener("DOMContentLoaded", () => {
			const scopeRadios = document.querySelectorAll("input[name='resetScope']");
			const worldSelect = document.getElementById("world-select");
			const resetButton = document.getElementById("history-reset-button");

			scopeRadios.forEach(radio => {
				radio.addEventListener("change", () => {
					worldSelect.classList.toggle("show", radio.value === "world");
				});
			});

			resetButton.addEventListener("click", () => {
				const scope = document.querySelector("input[name='resetScope']:checked").value;
				const world = document.getElementById("world-choice").value;
				let message = "履歴をリセットしました。";
				if (scope === "world") {
					if (!world) {
						alert("ワールドを選択してください。");
						return;
					}
					message = `ワールド「${world}」の履歴をリセットしました。`;
				} else {
					message = "全ワールド共通の履歴をリセットしました。";
				}
				alert(message);
			});
		});
	</script>
</body>
</html>
